import{r as S,j as e}from"./index-B_gVeGiv.js";import"./katex-p018AHG0.js";import{D as O}from"./StepByStep-BYyVPvbC.js";import{u as N,b as X,R as k,d as U,T as A,S as Y,a as Z,C as q}from"./Responsive-CZkJ6WC4.js";const H=[{id:"R",name:"Rosso",short:"R",hex:"#ef4444"},{id:"B",name:"Blu",short:"B",hex:"#3b82f6"},{id:"V",name:"Verde",short:"V",hex:"#22c55e"},{id:"G",name:"Giallo",short:"G",hex:"#eab308"}];function J(t,d){for(t=Math.abs(t),d=Math.abs(d);d;){const v=d;d=t%d,t=v}return t||1}function B(t,d){if(d===0||t===0)return{num:0,den:1,str:"0",dec:"0"};const v=J(t,d),s=t/v,m=d/v,R=m===1?`${s}`:`${s}/${m}`,z=s/m,u=z>=.001?z.toFixed(3).replace(".",","):z.toExponential(2);return{num:s,den:m,str:R,dec:u}}function $(){const t=2+Math.floor(Math.random()*2);return H.slice(0,t).map(d=>({...d,count:1+Math.floor(Math.random()*5)}))}function ne(){const{isMobile:t,isTablet:d,isDesktop:v}=N(),[s,m]=S.useState(()=>$()),[R,z]=S.useState(!1),u=S.useMemo(()=>s.reduce((o,n)=>o+n.count,0),[s]),b=s.length,T=S.useMemo(()=>s.map(o=>B(o.count,u)),[s,u]),F=S.useMemo(()=>s.map((o,n)=>{if(R)return s.map(i=>B(i.count,u));const r=u-1;return s.map((i,l)=>B(n===l?Math.max(i.count-1,0):i.count,r))}),[s,u,R]),P=S.useMemo(()=>s.map((o,n)=>s.map((r,i)=>{const l=T[n],c=F[n][i];return B(l.num*c.num,l.den*c.den)})),[s,T,F]),D=t?350:d?550:700,W=t?300:d?350:380,a=S.useMemo(()=>{const o=t?40:60,n=t?140:d?200:250,r=t?260:d?380:480,i=25,c=W-i-25,f=b*b,g=Array.from({length:f},(h,x)=>i+(f>1?x*c/(f-1):c/2)),p=[];for(let h=0;h<b;h++){p[h]=[];for(let x=0;x<b;x++)p[h][x]=g[h*b+x]}const y=s.map((h,x)=>{const j=p[x];return j.reduce((M,w)=>M+w,0)/j.length}),C=g.reduce((h,x)=>h+x,0)/g.length;return{xRoot:o,xFirst:n,xSecond:r,yRoot:C,yFirst:y,ySecond:p}},[b,s,W,t,d]),V=(o,n)=>{m(r=>r.map((i,l)=>l===o?{...i,count:Math.max(0,n)}:i))},L=o=>{const n=Math.max(1,Math.min(4,o));m(r=>n===r.length?r:n<r.length?r.slice(0,n):[...r,...H.slice(r.length,n).map(i=>({...i,count:2}))])},_=e.jsxs("div",{style:{display:"grid",gap:12},children:[s.map((o,n)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:o.hex,flexShrink:0}}),e.jsx("span",{style:{minWidth:t?50:60,fontWeight:500,fontSize:t?14:15},children:o.name}),e.jsx("input",{type:"number",min:0,value:o.count,onChange:r=>V(n,parseInt(r.target.value)||0),style:{width:t?50:60,padding:t?"10px 8px":"6px 10px",borderRadius:8,border:"1px solid #d1d5db",fontSize:16,textAlign:"center"}})]},o.id)),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,paddingTop:12,borderTop:"1px solid #e5e7eb",flexWrap:"wrap"},children:[e.jsxs("label",{style:{fontSize:13,display:"flex",alignItems:"center",gap:8},children:["Colori:",e.jsx("input",{type:"number",min:1,max:4,value:s.length,onChange:o=>L(parseInt(o.target.value)||2),style:{width:50,padding:t?"10px 8px":"6px 10px",borderRadius:6,border:"1px solid #d1d5db",fontSize:16,textAlign:"center"}})]}),e.jsxs("span",{style:{fontSize:13,color:"#6b7280"},children:["Totale: ",e.jsx("strong",{children:u})]})]})]}),E=e.jsxs(U,{direction:{mobile:"column",tablet:"row",desktop:"row"},gap:t?8:12,children:[e.jsx(A,{variant:R?"outline":"primary",onClick:()=>z(!1),fullWidth:t,size:t?"lg":"md",children:"Senza reimmissione"}),e.jsx(A,{variant:R?"primary":"outline",onClick:()=>z(!0),fullWidth:t,size:t?"lg":"md",children:"Con reimmissione"})]}),I=e.jsxs(X,{width:D,height:W,maxHeight:{mobile:"45vh",tablet:"50vh",desktop:"55vh"},children:[e.jsx("rect",{x:0,y:0,width:D,height:W,fill:"#fafafa",rx:8}),s.map((o,n)=>{const{xRoot:r,xFirst:i,yRoot:l,yFirst:c}=a,f=(r+i)/2,g=(l+c[n])/2,p=t?44:52,y=t?22:26;return e.jsxs("g",{children:[e.jsx("line",{x1:r,y1:l,x2:i,y2:c[n],stroke:"#94a3b8",strokeWidth:t?1.5:2}),e.jsx("rect",{x:f-p/2,y:g-y/2,width:p,height:y,rx:5,fill:"#fff",stroke:"#d1d5db"}),e.jsx("text",{x:f,y:g+(t?1:2),fontSize:t?10:11,textAnchor:"middle",fill:"#374151",children:T[n].str})]},`l1-${n}`)}),s.map((o,n)=>s.map((r,i)=>{const{xFirst:l,xSecond:c,yFirst:f,ySecond:g}=a,p=f[n],y=g[n][i],C=(l+c)/2,h=(p+y)/2,x=F[n][i],j=x.num===0,M=t?44:52,w=t?22:26;return e.jsxs("g",{children:[e.jsx("line",{x1:l,y1:p,x2:c,y2:y,stroke:j?"#e5e7eb":"#94a3b8",strokeWidth:j?1:t?1.5:2,strokeDasharray:j?"4 3":void 0}),e.jsx("rect",{x:C-M/2,y:h-w/2,width:M,height:w,rx:5,fill:"#fff",stroke:"#d1d5db"}),e.jsx("text",{x:C,y:h+(t?1:2),fontSize:t?10:11,textAnchor:"middle",fill:j?"#9ca3af":"#374151",children:x.str})]},`l2-${n}-${i}`)})),e.jsx("circle",{cx:a.xRoot,cy:a.yRoot,r:t?10:12,fill:"#fff",stroke:"#374151",strokeWidth:2}),e.jsx("text",{x:a.xRoot,y:a.yRoot+3,fontSize:t?8:9,textAnchor:"middle",fill:"#374151",children:"Start"}),s.map((o,n)=>e.jsxs("g",{children:[e.jsx("circle",{cx:a.xFirst,cy:a.yFirst[n],r:t?11:13,fill:"#fff",stroke:o.hex,strokeWidth:3}),e.jsx("text",{x:a.xFirst,y:a.yFirst[n]+4,fontSize:t?11:12,textAnchor:"middle",fill:o.hex,fontWeight:700,children:o.short})]},`n1-${n}`)),s.map((o,n)=>s.map((r,i)=>{const l=a.ySecond[n][i],c=P[n][i];return e.jsxs("g",{children:[e.jsx("circle",{cx:a.xSecond,cy:l,r:t?11:13,fill:"#fff",stroke:r.hex,strokeWidth:3}),e.jsx("text",{x:a.xSecond,y:l+4,fontSize:t?11:12,textAnchor:"middle",fill:r.hex,fontWeight:700,children:r.short}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs("text",{x:a.xSecond+20,y:l+3,fontSize:11,textAnchor:"start",fill:"#374151",fontWeight:600,children:[o.short,r.short]}),e.jsxs("text",{x:a.xSecond+50,y:l+3,fontSize:10,textAnchor:"start",fill:"#6b7280",children:["P=",c.str]})]})]},`n2-${n}-${i}`)}))]}),G=e.jsx("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:t?12:13,minWidth:t?350:"auto"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f8fafc"},children:[e.jsx("th",{style:{padding:t?"10px 8px":"10px 12px",borderBottom:"2px solid #e5e7eb",textAlign:"left"},children:"Esito"}),e.jsx("th",{style:{padding:t?"10px 8px":"10px 12px",borderBottom:"2px solid #e5e7eb",textAlign:"left"},children:"P"}),!t&&e.jsx("th",{style:{padding:"10px 12px",borderBottom:"2px solid #e5e7eb",textAlign:"left"},children:"Decimale"})]})}),e.jsx("tbody",{children:s.flatMap((o,n)=>s.map((r,i)=>{const l=P[n][i];return e.jsxs("tr",{style:{background:(n*b+i)%2===0?"#fff":"#f8fafc"},children:[e.jsx("td",{style:{padding:t?"10px 8px":"10px 12px",borderBottom:"1px solid #e5e7eb"},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[e.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:o.hex}}),e.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:r.hex}}),e.jsxs("strong",{children:[o.short,r.short]})]})}),e.jsx("td",{style:{padding:t?"10px 8px":"10px 12px",borderBottom:"1px solid #e5e7eb",fontWeight:600},children:l.str}),!t&&e.jsx("td",{style:{padding:"10px 12px",borderBottom:"1px solid #e5e7eb",color:"#6b7280"},children:l.dec})]},`${n}-${i}`)}))})]})});return t?e.jsxs(O,{title:"ProbabilitÃ  Urna",description:"Due estrazioni successive",children:[e.jsx(k,{padding:12,style:{marginBottom:12},children:e.jsxs(U,{direction:{mobile:"column"},gap:8,children:[E,e.jsx(A,{variant:"secondary",onClick:()=>m($()),fullWidth:!0,size:"lg",icon:e.jsx("span",{children:"ðŸŽ²"}),children:"Nuovo problema"})]})}),e.jsx(Y,{tabs:[{id:"tree",label:"ðŸŒ³ Albero",content:e.jsx(k,{padding:12,children:I})},{id:"urn",label:"ðŸŽ± Urna",content:e.jsx(k,{padding:16,children:_})},{id:"table",label:"ðŸ“‹ Risultati",content:e.jsx(k,{padding:12,children:G})}],defaultTab:"tree"})]}):e.jsxs(O,{title:"Albero di probabilitÃ  â€“ Estrazioni da un'urna",description:"Visualizza le probabilitÃ  di due estrazioni successive, con o senza reimmissione.",children:[e.jsxs(Z,{columns:{tablet:2,desktop:2},gap:12,children:[e.jsxs(k,{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:12},children:"ðŸŽ± Composizione urna"}),_]}),e.jsxs(k,{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:12},children:"âš™ï¸ ModalitÃ "}),E,e.jsx(A,{variant:"secondary",onClick:()=>m($()),fullWidth:!0,style:{marginTop:16},icon:e.jsx("span",{children:"ðŸŽ²"}),children:"Genera problema casuale"})]})]}),e.jsxs(k,{style:{marginTop:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:12},children:"ðŸ“Š Albero delle probabilitÃ "}),I]}),e.jsx(q,{title:"ðŸ“‹ Tabella probabilitÃ  congiunte",defaultOpen:v,openOnDesktop:!0,children:G}),e.jsxs("div",{style:{marginTop:12,background:"#eff6ff",borderRadius:12,padding:16,fontSize:13,color:"#1e40af"},children:[e.jsx("strong",{children:"ðŸ’¡ Come leggere l'albero:"}),e.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:20},children:[e.jsx("li",{children:"Moltiplica le probabilitÃ  sui rami per ottenere P(esito)"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Senza reimmissione:"})," le probabilitÃ  cambiano al 2Â° livello"]})]})]})]})}export{ne as default};
