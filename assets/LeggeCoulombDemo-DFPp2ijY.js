import{r as c,j as e}from"./index-B_gVeGiv.js";import"./katex-p018AHG0.js";import{D as ge}from"./StepByStep-BYyVPvbC.js";import{R as me,c as I}from"./formatting-BPjMr18d.js";import{f as v,v as je,c as be}from"./physics-DhkSNVl6.js";const l=920,a=520,d=40,ve=["nC","ÂµC","mC","C"],ne={nC:1e-9,ÂµC:1e-6,mC:.001,C:1};function oe({x1:r,y1:u,x2:x,y2:f,color:h="#10b981",label:y}){const T=x-r,D=f-u,m=Math.hypot(T,D)||1,C=T/m,g=D/m,z=12,i=x-C*z,S=f-g*z,s=i+-g*7,k=S+C*7,P=i- -g*7,j=S-C*7;return e.jsxs("g",{children:[e.jsx("line",{x1:r,y1:u,x2:x,y2:f,stroke:h,strokeWidth:4}),e.jsx("polygon",{points:`${x},${f} ${s},${k} ${P},${j}`,fill:h}),y&&e.jsx("text",{x:(r+x)/2,y:(u+f)/2-8,fontSize:12,textAnchor:"middle",fill:h,children:y})]})}function Fe(){const[r,u]=c.useState("ÂµC"),[x,f]=c.useState(130),[h,y]=c.useState(800),[T,D]=c.useState(!0),[m,C]=c.useState(3),[g,z]=c.useState(-4),[i,S]=c.useState({x:l*.33,y:a*.52}),[s,k]=c.useState({x:l*.67,y:a*.38}),P=c.useRef(null),[j,q]=c.useState(null),_=c.useMemo(()=>m*ne[r],[m,r]),E=c.useMemo(()=>g*ne[r],[g,r]),L=s.x-i.x,N=s.y-i.y,U=Math.max(1,Math.hypot(L,N)),X=U/x,Y=je({x:L,y:N}),$=U<8,G=_*E,F=$?0:Math.abs(be(_,E,X)),H=G>0?-1:1,w=H*Y.x*F,A=H*Y.y*F,O=-w,Q=-A,M=t=>{const n=Math.abs(t)*h;return(t>=0?1:-1)*I(n,6,2e3)},se=M(w),re=M(A),ce=M(O),le=M(Q),V=Math.atan2(A,w)*me,ae=G<0?"attrazione":"repulsione",b=c.useRef(null);function de(t,n){const o=P.current.getBoundingClientRect(),p=l/o.width,W=a/o.height;return{x:(t-o.left)*p,y:(n-o.top)*W}}function J(t,n,o){const p=de(t,n),W=I(p.x,d,l-d),te=I(p.y,d,a-d);o==="q1"?S({x:W,y:te}):k({x:W,y:te})}function K(t){return n=>{n.preventDefault(),n.stopPropagation();const o=n.touches[0];b.current={id:o.identifier,which:t},q({which:t,id:o.identifier})}}function xe(t){if(!b.current)return;t.preventDefault();const n=Array.from(t.touches).find(o=>o.identifier===b.current.id);n&&J(n.clientX,n.clientY,b.current.which)}function Z(t){if(!b.current)return;Array.from(t.touches).some(o=>o.identifier===b.current.id)||(b.current=null,q(null))}function ee(t,n){var o,p;n.pointerType!=="touch"&&(n.preventDefault(),n.stopPropagation(),(p=(o=n.currentTarget).setPointerCapture)==null||p.call(o,n.pointerId),q({which:t,id:n.pointerId}))}function fe(t){t.pointerType!=="touch"&&j&&(t.preventDefault(),J(t.clientX,t.clientY,j.which))}function B(t){t.pointerType!=="touch"&&j&&t.pointerId===j.id&&q(null)}function pe(){const t=()=>({x:d+Math.random()*(l-2*d),y:d+Math.random()*(a-2*d)});let n=t(),o=t(),p=0;for(;Math.hypot(n.x-o.x,n.y-o.y)<120&&p<50;)o=t(),p++;S(n),k(o)}function he(){F>0&&y(I(140/F,5,5e3))}function ue(){C(3),z(-4),u("ÂµC"),S({x:l*.33,y:a*.52}),k({x:l*.67,y:a*.38}),y(500),f(60)}const R={background:"#fff",borderRadius:16,padding:12,boxShadow:"0 1px 4px rgba(0,0,0,0.1)"},ye=j?"grabbing":"grab";return e.jsxs(ge,{title:"Legge di Coulomb â€” due cariche puntiformi",description:"Trascina i dischi per spostare q1 e q2. Osserva i vettori forza: direzione lungo la congiungente, modulo |F| = k|qâ‚qâ‚‚|/rÂ².",children:[e.jsxs("div",{style:R,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:"Piano (x,y)"}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:T,onChange:t=>D(t.target.checked)}),"Mostra forze"]}),e.jsx("button",{onClick:he,style:{padding:"6px 12px",borderRadius:8,border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Auto-scala"}),e.jsx("button",{onClick:pe,style:{padding:"6px 12px",borderRadius:8,border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Randomizza"}),e.jsx("button",{onClick:ue,style:{padding:"6px 12px",borderRadius:8,border:"1px solid #d1d5db",background:"#fff",cursor:"pointer"},children:"Reset"})]})]}),e.jsxs("svg",{ref:P,viewBox:`0 0 ${l} ${a}`,style:{width:"100%",height:"auto",maxHeight:"65vh",display:"block",margin:"0 auto",touchAction:"none"},onPointerMove:fe,onPointerUp:B,onPointerCancel:B,onPointerLeave:B,onTouchMove:xe,onTouchEnd:Z,onTouchCancel:Z,children:[e.jsx("rect",{x:0,y:0,width:l,height:a,rx:16,fill:"#ffffff"}),Array.from({length:10},(t,n)=>n+1).map(t=>e.jsx("line",{x1:t*l/10,y1:d,x2:t*l/10,y2:a-d,stroke:"#f1f5f9"},`vg-${t}`)),Array.from({length:8},(t,n)=>n+1).map(t=>e.jsx("line",{x1:d,y1:t*a/8,x2:l-d,y2:t*a/8,stroke:"#f1f5f9"},`hg-${t}`)),e.jsx("line",{x1:i.x,y1:i.y,x2:s.x,y2:s.y,stroke:"#94a3b8",strokeDasharray:"6 6"}),T&&!$&&e.jsxs(e.Fragment,{children:[e.jsx(oe,{x1:i.x,y1:i.y,x2:i.x+se,y2:i.y+re,color:"#0ea5e9",label:"Fâ‚"}),e.jsx(oe,{x1:s.x,y1:s.y,x2:s.x+ce,y2:s.y+le,color:"#ef4444",label:"Fâ‚‚"})]}),e.jsxs("g",{style:{cursor:ye},children:[e.jsx("circle",{cx:i.x,cy:i.y,r:40,fill:"transparent",style:{touchAction:"none"},onTouchStart:K("q1"),onPointerDown:t=>ee("q1",t)}),e.jsx("circle",{cx:i.x,cy:i.y,r:20,fill:m>=0?"#0ea5e9":"#0284c7",stroke:"#0c4a6e",strokeWidth:2,pointerEvents:"none"}),e.jsx("text",{x:i.x,y:i.y+5,fontSize:14,textAnchor:"middle",fill:"#ffffff",fontWeight:600,pointerEvents:"none",children:"qâ‚"}),e.jsx("circle",{cx:s.x,cy:s.y,r:40,fill:"transparent",style:{touchAction:"none"},onTouchStart:K("q2"),onPointerDown:t=>ee("q2",t)}),e.jsx("circle",{cx:s.x,cy:s.y,r:20,fill:g>=0?"#ef4444":"#dc2626",stroke:"#7f1d1d",strokeWidth:2,pointerEvents:"none"}),e.jsx("text",{x:s.x,y:s.y+5,fontSize:14,textAnchor:"middle",fill:"#ffffff",fontWeight:600,pointerEvents:"none",children:"qâ‚‚"})]}),e.jsxs("g",{children:[e.jsx("circle",{cx:(i.x+s.x)/2,cy:(i.y+s.y)/2,r:3,fill:"#94a3b8"}),e.jsxs("text",{x:(i.x+s.x)/2,y:(i.y+s.y)/2-10,fontSize:13,textAnchor:"middle",fill:"#475569",fontWeight:500,children:["r = ",X.toFixed(2)," m"]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto 1fr",gap:16,marginTop:16},children:[e.jsxs("div",{style:{...R,padding:"12px 16px"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#0ea5e9",fontSize:14},children:"âŠ• Carica qâ‚"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(ie,{label:"qâ‚",unit:r,value:m,step:.1,onChange:C}),e.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["= ",v(_,2)," C"]})]})]}),e.jsxs("div",{style:{...R,padding:"12px 16px"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#ef4444",fontSize:14},children:"âŠ– Carica qâ‚‚"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx(ie,{label:"qâ‚‚",unit:r,value:g,step:.1,onChange:z}),e.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["= ",v(E,2)," C"]})]})]}),e.jsxs("div",{style:{...R,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#10b981"},children:"ðŸ“Š Risultati"}),$?e.jsx("div",{style:{color:"#b91c1c",fontSize:13},children:"Cariche sovrapposte: forza non definita."}):e.jsxs("div",{style:{fontSize:13,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsxs("div",{children:["|",e.jsx("b",{children:"F"}),"| = ",e.jsx("span",{style:{color:"#10b981",fontWeight:600},children:v(F)})," N"]}),e.jsxs("div",{children:["Verso: ",e.jsx("b",{children:ae})]}),e.jsxs("div",{children:["Angolo: ",e.jsxs("b",{children:[isFinite(V)?V.toFixed(1):"â€“","Â°"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:["Fâ‚ = (",v(w,2),", ",v(A,2),") N"]}),e.jsxs("div",{children:["Fâ‚‚ = (",v(O,2),", ",v(Q,2),") N"]})]})]}),e.jsxs("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px solid #d1fae5",display:"flex",gap:16,flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12},children:["UnitÃ :",e.jsx("select",{value:r,onChange:t=>u(t.target.value),style:{padding:"4px 8px",borderRadius:4,border:"1px solid #d1d5db"},children:ve.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12},children:["px/m: ",e.jsx("input",{type:"range",min:20,max:200,value:x,onChange:t=>f(+t.target.value),style:{width:80}}),e.jsx("span",{style:{minWidth:30},children:x})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12},children:["Gain: ",e.jsx("input",{type:"range",min:5,max:5e3,step:5,value:h,onChange:t=>y(+t.target.value),style:{width:80}}),e.jsx("span",{style:{minWidth:40},children:Math.round(h)})]})]})]})]})]})}function ie({label:r,unit:u,value:x,step:f,onChange:h}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#64748b",fontSize:13,minWidth:24},children:r}),e.jsx("input",{type:"number",value:x,step:f,onChange:y=>h(parseFloat(y.target.value)||0),style:{padding:"4px 8px",borderRadius:4,border:"1px solid #d1d5db",fontSize:13,width:70,textAlign:"right"}}),e.jsx("span",{style:{color:"#94a3b8",fontSize:12},children:u})]})}export{Fe as default};
