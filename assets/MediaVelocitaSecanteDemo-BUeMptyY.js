import{r as c,j as e}from"./index-B_gVeGiv.js";import"./katex-p018AHG0.js";import{D as he}from"./StepByStep-BYyVPvbC.js";const v=10,fe=500,p=900,u=480,i={L:60,R:28,T:28,B:60},j=200,me=(l,o,n)=>Math.max(o,Math.min(n,l)),ge=(l,o,n)=>l+(o-l)*n,ue=(l,o=0,n=1)=>Array.from({length:l},(g,x)=>o+x*(n-o)/(l-1));function Q(l,o,n){const g=l.length;if(n<=l[0])return o[0];if(n>=l[g-1])return o[g-1];let x=0,h=g-1;for(;h-x>1;){const r=x+h>>1;l[r]<=n?x=r:h=r}return ge(o[x],o[h],(n-l[x])/(l[h]-l[x]))}function ye(l){let o=l>>>0;const n=()=>(o=o*1664525+1013904223>>>0)/2**32,g=(n()-.5)*2,x=6+10*n(),h=4+8*n(),r=2+6*n(),S=1+Math.floor(n()*3),y=2+Math.floor(n()*3),k=3+Math.floor(n()*4),T=2*Math.PI*n(),D=2*Math.PI*n(),W=2*Math.PI*n(),F=(n()-.5)*8;return s=>F+g*s+x*Math.sin(2*Math.PI*S*s/v+T)+h*Math.cos(2*Math.PI*y*s/v+D)+r*Math.sin(2*Math.PI*k*s/v+W)}function pe(l,o){const n=l.length,g=new Array(n).fill(0);for(let x=1;x<n-1;x++)g[x]=(o[x+1]-o[x-1])/(l[x+1]-l[x-1]);return g[0]=(o[1]-o[0])/(l[1]-l[0]),g[n-1]=(o[n-1]-o[n-2])/(l[n-1]-l[n-2]),g}function je(l,o){const n=[],g=[];for(let h=1;h<o.length-1;h++){const r=o[h]-o[h-1],S=o[h+1]-o[h];r>0&&S<0?n.push({t:l[h],s:o[h]}):r<0&&S>0&&g.push({t:l[h],s:o[h]})}const x=Math.ceil((n.length+g.length)/10)||1;return{maxima:n.filter((h,r)=>r%x===0),minima:g.filter((h,r)=>r%x===0)}}function be(){const[l,o]=c.useState(()=>typeof window<"u"?window.innerWidth:1200);return c.useEffect(()=>{const n=()=>o(window.innerWidth);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),l}function Se(){const l=be(),o=l<640,n=l>=640&&l<1024,g=l>=1024,[x,h]=c.useState(()=>Math.floor(Math.random()*1e9)),r=c.useMemo(()=>ue(fe,0,v),[]),S=c.useMemo(()=>ye(x),[x]),y=c.useMemo(()=>r.map(t=>S(t)),[S,r]),k=c.useMemo(()=>pe(r,y),[r,y]),T=c.useMemo(()=>Math.min(...y)-2,[y]),D=c.useMemo(()=>Math.max(...y)+2,[y]),W=c.useMemo(()=>Math.min(...k)-1,[k]),F=c.useMemo(()=>Math.max(...k)+1,[k]),s=c.useCallback(t=>i.L+t/v*(p-i.L-i.R),[]),f=c.useCallback(t=>u-i.B-(t-T)/(D-T)*(u-i.T-i.B),[T,D]),w=c.useCallback(t=>j-40-(t-W)/(F-W)*(j-60),[W,F]),Y=c.useCallback(t=>me((t-i.L)/(p-i.L-i.R)*v,0,v),[]),[a,P]=c.useState(2),[d,I]=c.useState(7),b=c.useMemo(()=>Q(r,y,a),[r,y,a]),M=c.useMemo(()=>Q(r,y,d),[r,y,d]),B=c.useMemo(()=>Q(r,k,a),[r,k,a]),X=Math.abs(d-a)>.01,$=X?(M-b)/(d-a):0,_=M-b,H=d-a,[U,Z]=c.useState(!0),[G,ee]=c.useState(!1),[J,te]=c.useState(!0),[A,q]=c.useState(null),se=t=>{const m=t.currentTarget.getBoundingClientRect(),z=p/m.width,L=(t.clientX-m.left)*z,R=Y(L);q(Math.abs(R-a)<=Math.abs(R-d)?"t1":"t2")},ne=t=>{if(!A)return;const m=t.currentTarget.getBoundingClientRect(),z=p/m.width,L=(t.clientX-m.left)*z,R=Y(L);A==="t1"?P(Math.min(R,d-.1)):I(Math.max(R,a+.1))},[E,K]=c.useState(!1);c.useEffect(()=>{if(!E)return;let t;const m=()=>{const z=d-a;if(z<=.05){K(!1);return}I(L=>L-Math.max(.02,z*.08)),t=requestAnimationFrame(m)};return t=requestAnimationFrame(m),()=>cancelAnimationFrame(t)},[E,a,d]);const{maxima:ie,minima:oe}=c.useMemo(()=>je(r,y),[r,y]),le=c.useMemo(()=>r.map((t,m)=>`${m===0?"M":"L"} ${s(t)} ${f(y[m])}`).join(" "),[r,y,s,f]),ae=c.useMemo(()=>r.map((t,m)=>`${m===0?"M":"L"} ${s(t)} ${w(k[m])}`).join(" "),[r,k,s,w]),V=Array.from({length:v+1},(t,m)=>m),C={background:"#fff",borderRadius:16,padding:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},N={padding:"6px 12px",borderRadius:8,border:"1px solid #d1d5db",background:"#fff",cursor:"pointer",fontSize:13},re={...N,background:"#e5e7eb",cursor:"default"},ce={display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",...o?{width:"100%",flexDirection:"column",alignItems:"stretch"}:{}},O=o?{width:"100%"}:void 0,de={display:"grid",gap:12,marginTop:12,...g?{gridTemplateColumns:"1fr 1fr 1fr"}:n?{gridTemplateColumns:"1fr 1fr"}:{gridTemplateColumns:"1fr"}},xe=n?{gridColumn:"1 / -1"}:{};return e.jsxs(he,{title:"Velocit√† media e retta secante",description:"La velocit√† media tra due istanti √® il coefficiente angolare della retta secante sul grafico s(t). Trascina i marcatori o usa l'animazione per vedere come la secante tende alla tangente.",children:[e.jsxs("div",{style:C,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},children:[e.jsx("div",{style:{fontWeight:600,fontSize:16},children:"Diagramma spazio-tempo s(t)"}),e.jsxs("div",{style:ce,children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,...o?{width:"100%"}:{}},children:[e.jsx("input",{type:"checkbox",checked:U,onChange:t=>Z(t.target.checked)}),"Secante"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,...o?{width:"100%"}:{}},children:[e.jsx("input",{type:"checkbox",checked:G,onChange:t=>ee(t.target.checked)}),"Tangente"]}),e.jsx("button",{onClick:()=>K(!0),disabled:E,style:{...E?re:N,...O||{}},children:"‚ñ∂ Anima t‚ÇÇ‚Üít‚ÇÅ"}),e.jsx("button",{onClick:()=>h(Math.floor(Math.random()*1e9)),style:{...N,...O||{}},children:"üé≤ Nuovo"})]})]}),e.jsxs("svg",{viewBox:`0 0 ${p} ${u}`,style:{width:"100%",height:"auto",maxHeight:o?"52vh":"55vh",cursor:A?"grabbing":"crosshair"},onMouseDown:se,onMouseMove:ne,onMouseUp:()=>q(null),onMouseLeave:()=>q(null),children:[e.jsx("rect",{x:0,y:0,width:p,height:u,fill:"#fafafa",rx:12}),V.map(t=>e.jsx("line",{x1:s(t),y1:i.T,x2:s(t),y2:u-i.B,stroke:"#e5e7eb"},t)),e.jsx("line",{x1:i.L,y1:u-i.B,x2:p-i.R,y2:u-i.B,stroke:"#374151",strokeWidth:2}),e.jsx("line",{x1:i.L,y1:i.T,x2:i.L,y2:u-i.B,stroke:"#374151",strokeWidth:2}),V.map(t=>e.jsx("text",{x:s(t),y:u-i.B+18,fontSize:11,textAnchor:"middle",fill:"#6b7280",children:t},t)),e.jsx("text",{x:(i.L+p-i.R)/2,y:u-10,fontSize:12,textAnchor:"middle",fill:"#374151",children:"t (s)"}),e.jsx("text",{x:16,y:(i.T+u-i.B)/2,fontSize:12,textAnchor:"middle",fill:"#374151",transform:`rotate(-90 16 ${(i.T+u-i.B)/2})`,children:"s (m)"}),e.jsx("path",{d:le,fill:"none",stroke:"#2563eb",strokeWidth:3}),ie.map((t,m)=>e.jsxs("g",{children:[e.jsx("circle",{cx:s(t.t),cy:f(t.s),r:5,fill:"#ef4444"}),e.jsx("text",{x:s(t.t),y:f(t.s)-10,fontSize:10,textAnchor:"middle",fill:"#991b1b",children:"max"})]},`max-${m}`)),oe.map((t,m)=>e.jsxs("g",{children:[e.jsx("circle",{cx:s(t.t),cy:f(t.s),r:5,fill:"#3b82f6"}),e.jsx("text",{x:s(t.t),y:f(t.s)+16,fontSize:10,textAnchor:"middle",fill:"#1e40af",children:"min"})]},`min-${m}`)),G&&e.jsx("line",{x1:s(0),y1:f(b+B*(0-a)),x2:s(v),y2:f(b+B*(v-a)),stroke:"#9333ea",strokeWidth:2.5,strokeDasharray:"8 4"}),X&&U&&e.jsxs("g",{children:[e.jsx("line",{x1:s(a),y1:f(b),x2:s(d),y2:f(M),stroke:"#10b981",strokeWidth:3}),e.jsx("line",{x1:s(a),y1:u-i.B+5,x2:s(d),y2:u-i.B+5,stroke:"#10b981",strokeWidth:3}),e.jsxs("text",{x:(s(a)+s(d))/2,y:u-i.B+22,fontSize:11,textAnchor:"middle",fill:"#047857",children:["Œît = ",H.toFixed(2)," s"]}),e.jsx("line",{x1:p-i.R+5,y1:f(b),x2:p-i.R+5,y2:f(M),stroke:"#10b981",strokeWidth:3}),e.jsxs("text",{x:p-i.R-8,y:(f(b)+f(M))/2,fontSize:11,textAnchor:"end",fill:"#047857",children:["Œîs = ",_.toFixed(1)," m"]})]}),e.jsxs("g",{children:[e.jsx("line",{x1:s(a),y1:f(b),x2:s(a),y2:u-i.B,stroke:"#ef4444",strokeDasharray:"4 3"}),e.jsx("circle",{cx:s(a),cy:f(b),r:8,fill:"#ef4444",stroke:"#fff",strokeWidth:2,style:{cursor:"grab"}}),e.jsx("rect",{x:s(a)-30,y:f(b)-26,width:60,height:18,fill:"#fff",stroke:"#ef4444",rx:4}),e.jsxs("text",{x:s(a),y:f(b)-13,fontSize:11,textAnchor:"middle",fill:"#b91c1c",children:["t‚ÇÅ=",a.toFixed(1),"s"]})]}),e.jsxs("g",{children:[e.jsx("line",{x1:s(d),y1:f(M),x2:s(d),y2:u-i.B,stroke:"#f59e0b",strokeDasharray:"4 3"}),e.jsx("circle",{cx:s(d),cy:f(M),r:8,fill:"#f59e0b",stroke:"#fff",strokeWidth:2,style:{cursor:"grab"}}),e.jsx("rect",{x:s(d)-30,y:f(M)-26,width:60,height:18,fill:"#fff",stroke:"#f59e0b",rx:4}),e.jsxs("text",{x:s(d),y:f(M)-13,fontSize:11,textAnchor:"middle",fill:"#92400e",children:["t‚ÇÇ=",d.toFixed(1),"s"]})]})]})]}),e.jsxs("div",{style:de,children:[e.jsxs("div",{style:{...C,...xe},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Controlli"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("label",{style:{fontSize:13},children:[e.jsx("span",{style:{color:"#ef4444",fontWeight:600},children:"t‚ÇÅ"})," = ",a.toFixed(2)," s",e.jsx("input",{type:"range",min:0,max:v-.1,step:.05,value:a,onChange:t=>P(Math.min(+t.target.value,d-.1)),style:{width:"100%",accentColor:"#ef4444"}})]}),e.jsxs("label",{style:{fontSize:13},children:[e.jsx("span",{style:{color:"#f59e0b",fontWeight:600},children:"t‚ÇÇ"})," = ",d.toFixed(2)," s",e.jsx("input",{type:"range",min:.1,max:v,step:.05,value:d,onChange:t=>I(Math.max(+t.target.value,a+.1)),style:{width:"100%",accentColor:"#f59e0b"}})]}),e.jsx("button",{onClick:()=>{P(2),I(7)},style:{padding:"6px 12px",borderRadius:6,border:"1px solid #d1d5db",background:"#fff",cursor:"pointer",fontSize:12,...o?{width:"100%"}:{}},children:"Reset posizioni"})]})]}),e.jsxs("div",{style:{...C,background:"#f0fdf4"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#166534"},children:"üìä Valori"}),e.jsxs("div",{style:{fontSize:13,display:"grid",gap:6},children:[e.jsxs("div",{children:["s(t‚ÇÅ) = ",e.jsx("strong",{children:b.toFixed(2)})," m"]}),e.jsxs("div",{children:["s(t‚ÇÇ) = ",e.jsx("strong",{children:M.toFixed(2)})," m"]}),e.jsxs("div",{style:{borderTop:"1px solid #bbf7d0",paddingTop:6,marginTop:4},children:[e.jsx("strong",{children:"Œîs"})," = s‚ÇÇ - s‚ÇÅ = ",e.jsx("strong",{children:_.toFixed(2)})," m"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Œît"})," = t‚ÇÇ - t‚ÇÅ = ",e.jsx("strong",{children:H.toFixed(2)})," s"]})]})]}),e.jsxs("div",{style:{...C,background:"linear-gradient(135deg, #dbeafe 0%, #ede9fe 100%)"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8,color:"#4338ca"},children:"üéØ Velocit√† media"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#10b981"},children:["vÃÑ = ",$.toFixed(3)," m/s"]}),e.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:8},children:["vÃÑ = Œîs / Œît = ",_.toFixed(2)," / ",H.toFixed(2)]}),G&&e.jsxs("div",{style:{fontSize:12,color:"#7c3aed",marginTop:8},children:["v(t‚ÇÅ) ‚âà ",B.toFixed(3)," m/s (tangente)"]})]})]}),e.jsxs("div",{style:{...C,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8,gap:8,flexWrap:"wrap"},children:[e.jsx("div",{style:{fontWeight:600},children:"Velocit√† istantanea v(t)"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:J,onChange:t=>te(t.target.checked)}),"Mostra grafico"]})]}),J&&e.jsxs("svg",{viewBox:`0 0 ${p} ${j}`,style:{width:"100%",height:"auto"},children:[e.jsx("rect",{x:0,y:0,width:p,height:j,fill:"#fafafa",rx:8}),V.map(t=>e.jsx("line",{x1:s(t),y1:20,x2:s(t),y2:j-40,stroke:"#e5e7eb"},t)),e.jsx("line",{x1:i.L,y1:j-40,x2:p-i.R,y2:j-40,stroke:"#374151",strokeWidth:1.5}),e.jsx("line",{x1:i.L,y1:20,x2:i.L,y2:j-40,stroke:"#374151",strokeWidth:1.5}),V.map(t=>e.jsx("text",{x:s(t),y:j-22,fontSize:10,textAnchor:"middle",fill:"#6b7280",children:t},t)),e.jsx("text",{x:(i.L+p-i.R)/2,y:j-6,fontSize:11,textAnchor:"middle",fill:"#374151",children:"t (s)"}),e.jsx("text",{x:14,y:j/2-10,fontSize:11,textAnchor:"middle",fill:"#374151",transform:`rotate(-90 14 ${j/2-10})`,children:"v (m/s)"}),e.jsx("path",{d:ae,fill:"none",stroke:"#7c3aed",strokeWidth:2.5}),e.jsx("line",{x1:s(a),y1:20,x2:s(a),y2:j-40,stroke:"#ef4444",strokeDasharray:"4 3",strokeWidth:1.5}),e.jsx("line",{x1:s(d),y1:20,x2:s(d),y2:j-40,stroke:"#f59e0b",strokeDasharray:"4 3",strokeWidth:1.5}),X&&e.jsxs("g",{children:[e.jsx("line",{x1:s(a),y1:w($),x2:s(d),y2:w($),stroke:"#10b981",strokeWidth:3}),e.jsx("text",{x:(s(a)+s(d))/2,y:w($)-6,fontSize:11,textAnchor:"middle",fill:"#047857",fontWeight:600,children:"vÃÑ"})]}),e.jsx("circle",{cx:s(a),cy:w(B),r:5,fill:"#9333ea"}),e.jsx("text",{x:s(a)+8,y:w(B)-6,fontSize:10,fill:"#7c3aed",children:"v(t‚ÇÅ)"})]})]}),e.jsxs("div",{style:{marginTop:12,background:"#eff6ff",borderRadius:12,padding:16,fontSize:13,color:"#1e40af"},children:[e.jsx("strong",{children:"üí° Concetto chiave:"})," La ",e.jsx("strong",{children:"secante"})," (verde) collega due punti sulla curva s(t). La sua pendenza √® la ",e.jsx("strong",{children:"velocit√† media"}),". Quando t‚ÇÇ si avvicina a t‚ÇÅ, la secante tende alla ",e.jsx("strong",{children:"tangente"})," (viola), la cui pendenza √® la ",e.jsx("strong",{children:"velocit√† istantanea"})," v(t‚ÇÅ). Questo √® il concetto di derivata!"]})]})}export{Se as default};
