import{r as s,j as i}from"./index-B_gVeGiv.js";import{s as Z,a as ii,g as ei,d as L,C as G,S as E,e as N,G as ti,A as ni,H,F as si,f as V,h as oi,N as li,i as ai,R as ri,k as di}from"./components-D2LD_pbq.js";const k=[{id:"inv",name:"f(x) = 1/x",expr:"1/x",f:t=>1/t,limitPlus:0,limitMinus:0,note:"Asintoto orizzontale y = 0"},{id:"inv-plus",name:"f(x) = 1/x + 2",expr:"1/x + 2",f:t=>1/t+2,limitPlus:2,limitMinus:2,note:"Asintoto orizzontale y = 2"},{id:"rational",name:"f(x) = (2x+1)/(x+3)",expr:"(2x+1)/(x+3)",f:t=>(2*t+1)/(t+3),limitPlus:2,limitMinus:2,note:"Funzione razionale con asintoto y = 2"},{id:"arctan",name:"f(x) = arctan(x)",expr:"arctan(x)",f:t=>Math.atan(t),limitPlus:Math.PI/2,limitMinus:-Math.PI/2,note:"Limiti diversi: π/2 e -π/2"},{id:"exp-neg",name:"f(x) = e⁻ˣ²",expr:"e⁻ˣ²",f:t=>Math.exp(-t*t),limitPlus:0,limitMinus:0,note:"Gaussiana: tende a 0 da entrambi i lati"},{id:"rational2",name:"f(x) = x/(x²+1)",expr:"x/(x²+1)",f:t=>t/(t*t+1),limitPlus:0,limitMinus:0,note:"Tende a 0 ma con segni opposti"}];function ci(){const[t,p]=s.useState(()=>typeof window<"u"?window.innerWidth:1200);s.useEffect(()=>{const h=()=>p(window.innerWidth);return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const b=t<640,n=t>=640&&t<1024,S=t>=1024;return{w:t,isMobile:b,isTablet:n,isDesktop:S}}function mi(){const{isMobile:t,isTablet:p,isDesktop:b}=ci(),[n,S]=s.useState(k[0]),[h,Y]=s.useState(!0),[j,y]=s.useState(!1),[D,F]=s.useState(null),[u,P]=s.useState(null),[w,A]=s.useState(!1),[z,q]=s.useState("plus"),a=-25,r=25,x=s.useMemo(()=>Z(n.f,a,r,500),[n,a,r]),C=s.useMemo(()=>{const e=x.map(o=>o.y).filter(o=>Math.abs(o)<100);return Math.min(...e,n.limitPlus??0,n.limitMinus??0)-1},[x,n]),T=s.useMemo(()=>{const e=x.map(o=>o.y).filter(o=>Math.abs(o)<100);return Math.max(...e,n.limitPlus??0,n.limitMinus??0)+1},[x,n]),{toX:m,toY:d}=s.useMemo(()=>ii(a,r,C,T),[a,r,C,T]),B=s.useMemo(()=>{const e=[],l=[r*.3,r*.5,r*.7,r*.85,r*.95];for(const o of l){const c=n.f(o);Number.isFinite(c)&&e.push({x:o,fx:c})}return e},[n,r]),I=s.useMemo(()=>{const e=[],l=[a*.3,a*.5,a*.7,a*.85,a*.95];for(const o of l){const c=n.f(o);Number.isFinite(c)&&e.push({x:o,fx:c})}return e},[n,a]),X=s.useMemo(()=>ei(x,m,d),[x,m,d]),v=s.useRef(null);s.useEffect(()=>{if(!j){F(null);return}let e=null;const l=4e3,o=c=>{e||(e=c);const W=Math.min(1,(c-e)/l);if(F(z==="plus"?W*r*.95:-W*Math.abs(a)*.95),W>=1){y(!1);return}v.current=requestAnimationFrame(o)};return v.current=requestAnimationFrame(o),()=>{v.current&&cancelAnimationFrame(v.current)}},[j,z,a,r]);const f=w&&u!==null?u:D,g=f!==null?n.f(f):null,$=s.useCallback(e=>{const l=k.find(o=>o.id===e);l&&(S(l),y(!1),A(!1),P(null))},[]),_=s.useCallback(()=>{A(e=>{const l=!e;return l&&P(10),l}),y(!1)},[]),M=e=>e===null?"non esiste":e===Math.PI/2?"π/2 ≈ 1.571":e===-Math.PI/2?"-π/2 ≈ -1.571":e.toFixed(4),O={maxWidth:1100,margin:"0 auto",padding:16},U={display:"flex",justifyContent:"space-between",alignItems:t?"stretch":"center",marginBottom:12,flexWrap:"wrap",gap:8},J={display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",width:t?"100%":"auto"},R=t?{width:"100%"}:p?{flex:1,minWidth:160}:{},K=b?{display:"grid",gridTemplateColumns:"220px 1fr 1fr",gap:12,marginTop:12}:p?{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:12}:{display:"grid",gridTemplateColumns:"1fr",gap:12,marginTop:12},Q=p?{gridColumn:"1 / -1"}:{};return i.jsxs("div",{style:O,children:[i.jsx("h1",{style:{fontSize:22,fontWeight:700,marginBottom:6},children:"Limite finito per x → ±∞"}),i.jsxs("p",{style:{color:"#475569",marginBottom:12},children:["Studia il comportamento di funzioni con ",i.jsx("strong",{children:"asintoti orizzontali"}),": quando x tende a ±∞, f(x) tende a un valore finito L."]}),i.jsxs("div",{style:L,children:[i.jsxs("div",{style:U,children:[i.jsxs("div",{style:{fontWeight:600,fontSize:16},children:["Grafico di ",n.name]}),i.jsxs("div",{style:J,children:[i.jsxs("select",{value:z,onChange:e=>q(e.target.value),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #cbd5e1",width:t?"100%":"auto"},children:[i.jsx("option",{value:"plus",children:"Verso +∞"}),i.jsx("option",{value:"minus",children:"Verso -∞"})]}),i.jsx("div",{style:R,children:i.jsx(G,{onClick:()=>y(!0),disabled:j,children:j?"Animazione...":"▶ Anima"})}),i.jsx("div",{style:R,children:i.jsx(G,{onClick:_,active:w,children:"Manuale"})}),i.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,width:t?"100%":"auto",padding:t?"6px 0":0},children:[i.jsx("input",{type:"checkbox",checked:h,onChange:e=>Y(e.target.checked)}),"Punti"]})]})]}),i.jsxs("svg",{viewBox:`0 0 ${E} ${N}`,style:{width:"100%",height:"auto",maxHeight:t?"56vh":"60vh"},children:[i.jsx(ti,{id:"gridLimiteFin"}),i.jsx("rect",{x:0,y:0,width:E,height:N,fill:"url(#gridLimiteFin)"}),i.jsx(ni,{xMin:a,xMax:r,yMin:C,yMax:T,toX:m,toY:d}),n.limitPlus!==null&&i.jsx(H,{y:n.limitPlus,toY:d,color:"#10b981",label:`L₊ = ${M(n.limitPlus)}`}),n.limitMinus!==null&&n.limitMinus!==n.limitPlus&&i.jsx(H,{y:n.limitMinus,toY:d,color:"#f59e0b",label:`L₋ = ${M(n.limitMinus)}`}),i.jsx(si,{pathD:X}),h&&i.jsxs(i.Fragment,{children:[i.jsx(V,{points:B,toX:m,toY:d,color:"#10b981",side:"right"}),i.jsx(V,{points:I,toX:m,toY:d,color:"#f59e0b",side:"left"})]}),f!==null&&g!==null&&Number.isFinite(g)&&i.jsx(oi,{x:f,y:g,toX:m,toY:d})]}),n.note&&i.jsx(li,{note:n.note}),w&&i.jsx("div",{style:{marginTop:12,padding:12,background:"#f0f9ff",borderRadius:8},children:i.jsxs("label",{style:{fontSize:13},children:["x = ",(u==null?void 0:u.toFixed(1))??0,i.jsx("input",{type:"range",min:a,max:r,step:.5,value:u??0,onChange:e=>P(parseFloat(e.target.value)),style:{width:"100%",marginTop:4}})]})})]}),i.jsxs("div",{style:K,children:[i.jsxs("div",{style:{...L,...Q},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Funzione"}),i.jsx(ai,{functions:k,selected:n.id,onSelect:$})]}),i.jsxs(ri,{title:"Limiti all'infinito",children:[i.jsxs("div",{style:{display:"grid",gap:8},children:[i.jsxs("div",{style:{padding:8,background:"#dcfce7",borderRadius:8},children:[i.jsx("div",{style:{fontSize:12,color:"#166534"},children:"Per x → +∞"}),i.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#10b981"},children:["lim = ",M(n.limitPlus)]})]}),i.jsxs("div",{style:{padding:8,background:"#fef3c7",borderRadius:8},children:[i.jsx("div",{style:{fontSize:12,color:"#92400e"},children:"Per x → -∞"}),i.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#f59e0b"},children:["lim = ",M(n.limitMinus)]})]})]}),f!==null&&g!==null&&i.jsxs("div",{style:{marginTop:12,padding:8,background:"#f0f4f8",borderRadius:8,fontSize:12},children:[i.jsxs("div",{children:["x = ",f.toFixed(2)]}),i.jsxs("div",{children:["f(x) = ",g.toFixed(6)]})]})]}),i.jsxs("div",{style:L,children:[i.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Valori per x grande"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,fontSize:11},children:[i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,color:"#10b981",marginBottom:4},children:"x → +∞"}),B.map((e,l)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:e.x.toFixed(1)}),i.jsx("span",{children:e.fx.toFixed(4)})]},l))]}),i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,color:"#f59e0b",marginBottom:4},children:"x → -∞"}),I.map((e,l)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx("span",{children:e.x.toFixed(1)}),i.jsx("span",{children:e.fx.toFixed(4)})]},l))]})]})]})]}),i.jsxs(di,{children:["Il limite per x → ±∞ è ",i.jsx("strong",{children:"finito"})," quando f(x) si avvicina a un valore L. La retta y = L è un"," ",i.jsx("strong",{children:"asintoto orizzontale"}),". I limiti per x → +∞ e x → -∞ possono essere uguali o diversi."]})]})}export{mi as default};
