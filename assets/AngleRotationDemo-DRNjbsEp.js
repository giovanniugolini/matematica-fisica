import{r,j as e}from"./index-B_gVeGiv.js";import"./katex-p018AHG0.js";import{D as ee}from"./StepByStep-BYyVPvbC.js";import{u as ne,R as k,S as Le,a as te,C as Ge,b as Ie,c as xe,T as he}from"./Responsive-CZkJ6WC4.js";import{D,f as He,n as se,a as _e,p as u,c as Ne,s as ue,R as qe}from"./formatting-BPjMr18d.js";const A=420,s=A/2,t=A/2,i=160;function w({active:x,onClick:R,label:g,activeColor:c}){const{isMobile:p}=ne();return e.jsx("button",{onClick:R,style:{padding:p?"10px 14px":"6px 12px",borderRadius:20,background:x?c:"#f3f4f6",border:x?`2px solid ${c}`:"1px solid #e5e7eb",cursor:"pointer",fontSize:p?14:13,fontWeight:x?600:400,minHeight:p?44:32},children:g})}function W({checked:x,onChange:R,label:g}){const{isMobile:c}=ne();return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",padding:c?"8px 0":"4px 0",fontSize:c?15:14},children:[e.jsx("input",{type:"checkbox",checked:x,onChange:p=>R(p.target.checked),style:{width:18,height:18}}),g]})}function Ke(){const{isMobile:x,isTablet:R}=ne(),[g]=r.useState(0),[c,p]=r.useState(35),pe=r.useRef(0),y=r.useRef(35),S=r.useRef(c),[T,ie]=r.useState(!1),[B,fe]=r.useState(30),[O,ge]=r.useState(1),[oe,ye]=r.useState(!0),[V,je]=r.useState(!1),[M,me]=r.useState(!1),[L,be]=r.useState(!1),[G,ve]=r.useState(!0),[re,ke]=r.useState(!0),[I,Se]=r.useState(!0),[H,Ce]=r.useState(!0),[_,we]=r.useState(!0),[N,Ae]=r.useState(!1),ae=r.useRef(null),z=r.useMemo(()=>g*D,[g]),j=r.useMemo(()=>c*D,[c]);r.useEffect(()=>{if(!T)return;let n,o=performance.now();const l=a=>{const d=(a-o)/1e3;o=a;const h=O*B*d;y.current+=h,p(_e(y.current)),n=requestAnimationFrame(l)};return n=requestAnimationFrame(l),()=>cancelAnimationFrame(n)},[T,B,O]);const F=u(i,z,s,t),f=u(i,j,s,t),P={x:f.x,y:t},E={x:s,y:f.y},C=y.current-pe.current,m=C>=0,q=(Math.abs(C)%360+360)%360,Re=se(c-g),Te=Math.cos(j),$e=Math.sin(j),X=Math.tan(j),De=t-i*X,le=Ne(De,t-i*2.2,t+i*2.2);function We(n){var de;const o=ae.current;if(!o)return;const l=n.currentTarget;(de=l.setPointerCapture)==null||de.call(l,n.pointerId);const a=o.createSVGPoint(),d=b=>{a.x=b.clientX,a.y=b.clientY;const $=o.getScreenCTM();return $?a.matrixTransform($.inverse()):{x:0,y:0}},h=b=>{const $=d(b),Be=$.x-s,Oe=$.y-t;let v=Math.atan2(-Oe,Be)*qe;v<0&&(v+=360),G&&(v=ue(v));const Ve=S.current;let Q=v-Ve;Q=se(Q),y.current+=Q,S.current=v,p(v)},ce=()=>{var b;try{(b=l.releasePointerCapture)==null||b.call(l,n.pointerId)}catch{}window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",ce)};window.addEventListener("pointermove",h,{passive:!1}),window.addEventListener("pointerup",ce,{passive:!0})}r.useEffect(()=>{I||(y.current=c),S.current=c},[I,c]);const Me=()=>{p(0),y.current=0,S.current=0,ie(!1)};function ze(){const n=q;if(n<=1e-6)return null;const o=n>180?1:0,l=m?0:1,a=u(60,z,s,t),d=u(60,j,s,t),h=`M ${a.x} ${a.y} A 60 60 0 ${o} ${l} ${d.x} ${d.y}`;return e.jsx("path",{d:h,fill:"none",stroke:m?"#3b82f6":"#ef4444",strokeWidth:5})}function Fe(){if(!V)return null;const n=q;if(n<=1e-6)return null;const o=n>180?1:0,l=m?0:1,a=u(i,z,s,t),d=u(i,j,s,t),h=`M ${a.x} ${a.y} A ${i} ${i} 0 ${o} ${l} ${d.x} ${d.y}`;return e.jsx("path",{d:h,fill:"none",stroke:m?"#ef4444":"#7f1d1d",strokeWidth:6,strokeLinecap:"round"})}function Pe(){if(!L)return null;const n=q;if(n<=1e-6)return null;const o=n>180?1:0,l=m?0:1,a=u(i,z,s,t),d=u(i,j,s,t),h=`M ${s} ${t} L ${a.x} ${a.y} A ${i} ${i} 0 ${o} ${l} ${d.x} ${d.y} Z`;return e.jsx("path",{d:h,fill:"rgba(59,130,246,0.18)",stroke:"none"})}function Ee(){if(!re)return null;const n=[];for(let o=0;o<360;o+=30){const l=o*D,a=u(i-8,l,s,t),d=u(i+8,l,s,t);n.push(e.jsx("line",{x1:a.x,y1:a.y,x2:d.x,y2:d.y,stroke:"#cbd5e1"},`t-${o}`));const h=u(i+22,l,s,t);n.push(e.jsxs("text",{x:h.x,y:h.y,fontSize:10,textAnchor:"middle",dominantBaseline:"middle",fill:"#64748b",children:[o,"¬∞"]},`lbl-${o}`))}return e.jsx("g",{children:n})}const Y=e.jsxs(Ie,{width:A,height:A,maxHeight:{mobile:"55vh",tablet:"50vh",desktop:"auto"},svgProps:{ref:ae,onPointerDown:We,style:{cursor:"crosshair",touchAction:"none"}},children:[e.jsx("rect",{x:0,y:0,width:A,height:A,fill:"white"}),e.jsx("circle",{cx:s,cy:t,r:i,fill:"none",stroke:"#e5e7eb",strokeWidth:2}),e.jsx(Ee,{}),e.jsx(Pe,{}),e.jsx(Fe,{}),e.jsx("line",{x1:s-i-12,y1:t,x2:s+i+12,y2:t,stroke:"#d1d5db",strokeDasharray:"6 6"}),e.jsx("line",{x1:s,y1:t-i-12,x2:s,y2:t+i+12,stroke:"#d1d5db",strokeDasharray:"6 6"}),e.jsx("line",{x1:s,y1:t,x2:F.x,y2:F.y,stroke:"#6b7280",strokeWidth:4}),e.jsx("line",{x1:s,y1:t,x2:f.x,y2:f.y,stroke:M?"#f59e0b":"#111827",strokeWidth:M?6:4}),e.jsx(ze,{}),oe&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:f.x,y1:f.y,x2:P.x,y2:P.y,stroke:"#94a3b8",strokeDasharray:"4 4"}),e.jsx("line",{x1:f.x,y1:f.y,x2:E.x,y2:E.y,stroke:"#94a3b8",strokeDasharray:"4 4"}),H&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:s,y1:t,x2:P.x,y2:t,stroke:"#0ea5e9",strokeWidth:5}),e.jsx("circle",{cx:P.x,cy:t,r:4,fill:"#0ea5e9"})]}),_&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:s,y1:t,x2:s,y2:E.y,stroke:"#10b981",strokeWidth:5}),e.jsx("circle",{cx:s,cy:E.y,r:4,fill:"#10b981"})]})]}),N&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:s+i,y1:t-i*2.4,x2:s+i,y2:t+i*2.4,stroke:"#f97316",strokeDasharray:"6 6"}),e.jsx("line",{x1:s+i,y1:t,x2:s+i,y2:le,stroke:"#f97316",strokeWidth:5}),e.jsx("circle",{cx:s+i,cy:le,r:4,fill:"#f97316"})]}),e.jsx("circle",{cx:F.x,cy:F.y,r:x?14:10,fill:"#9ca3af",stroke:"#0f172a",strokeWidth:2}),e.jsx("circle",{cx:f.x,cy:f.y,r:x?14:10,fill:"#3b82f6",stroke:"#0f172a",strokeWidth:2}),e.jsx("circle",{cx:s,cy:t,r:5,fill:"#111827"}),!x&&e.jsx("text",{x:s+i+10,y:t-8,fontSize:11,fill:"#6b7280",children:"Œ±=0¬∞ (fisso)"})]}),Z=e.jsxs(k,{style:{background:"#f8fafc"},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"üìê Misure"}),e.jsxs("div",{style:{display:"grid",gap:6,fontSize:x?14:13},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Œ≤:"})," ",c.toFixed(1),"¬∞"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Œ∏ orientato:"})," ",C.toFixed(1),"¬∞"]}),e.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["= ",(C*D).toFixed(3)," rad = ",He(C*D)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Œ∏ principale:"})," ",Re.toFixed(1),"¬∞"]}),e.jsxs("div",{style:{padding:"6px 10px",background:m?"#dbeafe":"#fecaca",borderRadius:6,fontSize:12},children:[m?"‚ü≤ Antiorario (+)":"‚ü≥ Orario (‚àí)"," ‚Ä¢ Giri: ",(C/360).toFixed(2)]})]})]}),U=e.jsxs(k,{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"üìä Funzioni goniometriche"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[e.jsx(w,{active:H,onClick:()=>Ce(!H),label:"cos Œ∏",activeColor:"#e0f2fe"}),e.jsx(w,{active:_,onClick:()=>we(!_),label:"sin Œ∏",activeColor:"#d1fae5"}),e.jsx(w,{active:N,onClick:()=>Ae(!N),label:"tan Œ∏",activeColor:"#ffedd5"})]}),e.jsxs("div",{style:{fontFamily:"monospace",fontSize:x?14:13,background:"#f8fafc",padding:10,borderRadius:8,display:"grid",gap:4},children:[e.jsxs("div",{style:{color:"#0ea5e9"},children:["cos Œ∏ = ",e.jsx("strong",{children:Te.toFixed(4)})]}),e.jsxs("div",{style:{color:"#10b981"},children:["sin Œ∏ = ",e.jsx("strong",{children:$e.toFixed(4)})]}),e.jsxs("div",{style:{color:"#f97316"},children:["tan Œ∏ = ",e.jsx("strong",{children:Math.abs(X)>1e3?"¬±‚àû":X.toFixed(4)})]})]})]}),J=e.jsxs(k,{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:12},children:"‚öôÔ∏è Controlli"}),e.jsx(xe,{value:c,onChange:n=>{const o=G?ue(n):n,l=S.current;let a=o-l;a=se(a),y.current+=a,S.current=o,p(o)},min:0,max:360,step:1,label:"Œ≤ (gradi)",formatValue:n=>`${n.toFixed(0)}¬∞`}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:16,flexWrap:"wrap"},children:[e.jsx(he,{variant:T?"secondary":"primary",onClick:()=>ie(!T),fullWidth:x,children:T?"‚è∏ Pausa":"‚ñ∂ Anima"}),e.jsx(he,{variant:"outline",onClick:Me,fullWidth:x,children:"üîÑ Reset"})]}),e.jsxs("div",{style:{marginTop:16},children:[e.jsx(xe,{value:B,onChange:fe,min:10,max:180,step:10,label:"Velocit√†",formatValue:n=>`${n}¬∞/s`}),e.jsx("div",{style:{marginTop:8},children:e.jsx(W,{checked:O===-1,onChange:n=>ge(n?-1:1),label:"Senso orario"})})]})]}),K=e.jsxs(k,{children:[e.jsx("div",{style:{fontWeight:600,marginBottom:12},children:"üé® Visualizzazione"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:16},children:[e.jsx(w,{active:V,onClick:()=>je(!V),label:"Arco",activeColor:"#fecaca"}),e.jsx(w,{active:M,onClick:()=>me(!M),label:"Raggio",activeColor:"#fde68a"}),e.jsx(w,{active:L,onClick:()=>be(!L),label:"Settore",activeColor:"#dbeafe"})]}),e.jsxs("div",{style:{display:"grid",gap:4},children:[e.jsx(W,{checked:I,onChange:Se,label:"Pi√π giri (accumula oltre 360¬∞)"}),e.jsx(W,{checked:oe,onChange:ye,label:"Mostra proiezioni"}),e.jsx(W,{checked:re,onChange:ke,label:"Tacche ogni 30¬∞"}),e.jsx(W,{checked:G,onChange:ve,label:"Snap angoli notevoli"})]})]});return x?e.jsxs(ee,{title:"Angolo orientato",description:"Trascina il punto blu per ruotare Œ≤",children:[e.jsx(k,{padding:8,style:{marginBottom:12},children:Y}),Z,e.jsx("div",{style:{marginTop:12},children:e.jsx(Le,{tabs:[{id:"trig",label:"üìä Trig",content:U},{id:"controls",label:"‚öôÔ∏è Controlli",content:J},{id:"options",label:"üé® Opzioni",content:K}],defaultTab:"trig"})})]}):R?e.jsxs(ee,{title:"Angolo orientato ‚Ä¢ pi√π giri ‚Ä¢ funzioni goniometriche",description:"Trascina il punto blu per muovere Œ≤. Œ∏ = Œ≤ ‚àí Œ± (antiorario = positivo).",children:[e.jsxs(te,{columns:{tablet:2},gap:12,children:[e.jsx(k,{padding:8,children:Y}),e.jsxs("div",{style:{display:"grid",gap:12},children:[Z,U]})]}),e.jsx(Ge,{title:"‚öôÔ∏è Controlli avanzati",defaultOpen:!1,children:e.jsxs(te,{columns:{tablet:2},gap:12,children:[J,K]})})]}):e.jsx(ee,{title:"Angolo orientato ‚Ä¢ pi√π giri ‚Ä¢ funzioni goniometriche",description:"Œ± √® bloccato a 0¬∞ (asse x positivo). Trascina il punto blu per muovere Œ≤. Œ∏ = Œ≤ ‚àí Œ± (antiorario = positivo).",children:e.jsxs(te,{columns:{desktop:2},gap:16,children:[e.jsx(k,{padding:12,children:Y}),e.jsxs("div",{style:{display:"grid",gap:12},children:[Z,U,J,K]})]})})}export{Ke as default};
