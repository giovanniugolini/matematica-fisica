import{r as s,j as e}from"./index-B_gVeGiv.js";import{s as se,c as oe,a as ae,b as le,g as re,d as k,C as H,S as X,e as $,G as de,A as ce,V as xe,H as ue,F as fe,L as me,f as Y,h as he,N as pe,i as ge,R as je,j as ye,k as ve}from"./components-D2LD_pbq.js";const V=[{id:"quad",name:"f(x) = x²",expr:"x²",f:t=>t*t,x0Default:2,limitValue:t=>t*t},{id:"sin",name:"f(x) = sin(x)",expr:"sin(x)",f:t=>Math.sin(t),x0Default:Math.PI/2,limitValue:t=>Math.sin(t)},{id:"removable",name:"f(x) = (x²-4)/(x-2)",expr:"(x²-4)/(x-2)",f:t=>Math.abs(t-2)<.001?NaN:(t*t-4)/(t-2),x0Default:2,limitValue:t=>2*t,note:"Punto rimovibile in x=2"},{id:"sinc",name:"f(x) = sin(x)/x",expr:"sin(x)/x",f:t=>Math.abs(t)<.001?NaN:Math.sin(t)/t,x0Default:0,limitValue:t=>t===0?1:Math.sin(t)/t,note:"Limite notevole: lim(x→0) sin(x)/x = 1"},{id:"cubic",name:"f(x) = x³ - 2x",expr:"x³ - 2x",f:t=>t*t*t-2*t,x0Default:1,limitValue:t=>t*t*t-2*t},{id:"exp",name:"f(x) = eˣ",expr:"eˣ",f:t=>Math.exp(t),domain:{min:-3,max:3},x0Default:0,limitValue:t=>Math.exp(t)}];function be(){const[t,h]=s.useState(()=>typeof window<"u"?window.innerWidth:1200);return s.useEffect(()=>{const y=()=>h(window.innerWidth);return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),t}function Me(){var G,q;const t=be(),h=t<640,y=t>=640&&t<1024,O=t>=1024,[o,_]=s.useState(V[0]),[W,P]=s.useState(o.x0Default),[L,U]=s.useState(!0),[J,B]=s.useState(!0),[F,S]=s.useState(!1),[K,N]=s.useState(null),[g,A]=s.useState(null),[M,I]=s.useState(!1),r=((G=o.domain)==null?void 0:G.min)??-5,d=((q=o.domain)==null?void 0:q.max)??5,n=le(W,r+.5,d-.5),w=s.useMemo(()=>se(o.f,r,d,400),[o,r,d]),{yMin:D,yMax:R}=s.useMemo(()=>oe(w),[w]),{toX:x,toY:u}=s.useMemo(()=>ae(r,d,D,R),[r,d,D,R]),f=o.limitValue(n),v=s.useMemo(()=>{const i=[];for(let l=5;l>=1;l--){const m=n-.1*l/5,c=o.f(m);Number.isFinite(c)&&i.push({x:m,fx:c})}return i},[o,n]),C=s.useMemo(()=>{const i=[];for(let l=1;l<=5;l++){const m=n+.1*l/5,c=o.f(m);Number.isFinite(c)&&i.push({x:m,fx:c})}return i},[o,n]),Q=s.useMemo(()=>re(w,x,u),[w,x,u]),T=s.useRef(null);s.useEffect(()=>{if(!F){N(null);return}let i="left",a=null;const l=2500,m=c=>{a||(a=c);const z=Math.min(1,(c-a)/l);if(i==="left"){const b=Math.max(r,n-2);N(b+z*(n-b-.01)),z>=1&&(i="right",a=c)}else{const b=Math.min(d,n+2);if(N(b-z*(b-n-.01)),z>=1){S(!1);return}}T.current=requestAnimationFrame(m)};return T.current=requestAnimationFrame(m),()=>{T.current&&cancelAnimationFrame(T.current)}},[F,n,r,d]);const p=M&&g!==null?g:K,j=p!==null?o.f(p):null,Z=i=>{const a=V.find(l=>l.id===i);a&&(_(a),P(a.x0Default),S(!1),I(!1))},ee=()=>{I(i=>{const a=!i;return a&&(A(n-1),S(!1)),a})},te={display:"flex",gap:8,flexWrap:"wrap",alignItems:"center",...h?{width:"100%",flexDirection:"column",alignItems:"stretch"}:{}},E=h?{width:"100%",justifyContent:"center"}:void 0,ie={display:"grid",gap:12,marginTop:12,...O?{gridTemplateColumns:"200px 1fr 1fr"}:y?{gridTemplateColumns:"1fr 1fr"}:{gridTemplateColumns:"1fr"}},ne=y?{gridColumn:"1 / -1"}:{};return e.jsxs("div",{style:{maxWidth:1100,margin:"0 auto",padding:16},children:[e.jsx("h1",{style:{fontSize:22,fontWeight:700,marginBottom:6},children:"Limite finito per x → x₀ finito"}),e.jsxs("p",{style:{color:"#475569",marginBottom:12},children:["Studia il comportamento di una funzione quando x si avvicina a un punto x₀. Il limite è ",e.jsx("strong",{children:"finito"})," quando f(x) tende a un valore L finito."]}),e.jsxs("div",{style:k,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},children:[e.jsxs("div",{style:{fontWeight:600,fontSize:16},children:["Grafico di ",o.name]}),e.jsxs("div",{style:te,children:[e.jsx(H,{onClick:()=>S(!0),disabled:F,style:E,children:F?"Animazione...":"▶ Anima"}),e.jsx(H,{onClick:ee,active:M,style:E,children:M?"Manuale ON":"Manuale"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:13,...h?{width:"100%",justifyContent:"flex-start"}:{}},children:[e.jsx("input",{type:"checkbox",checked:L,onChange:i=>U(i.target.checked)}),"Limiti dx/sx"]})]})]}),e.jsxs("svg",{viewBox:`0 0 ${X} ${$}`,style:{width:"100%",height:"auto",maxHeight:h?"55vh":"60vh"},children:[e.jsx(de,{id:"gridLimite"}),e.jsx("rect",{x:0,y:0,width:X,height:$,fill:"url(#gridLimite)"}),e.jsx(ce,{xMin:r,xMax:d,yMin:D,yMax:R,toX:x,toY:u}),e.jsx(xe,{x:n,toX:x,color:"#ef4444",label:`x₀ = ${n.toFixed(2)}`}),Number.isFinite(f)&&e.jsx(ue,{y:f,toY:u,color:"#10b981",label:`L = ${f.toFixed(3)}`}),e.jsx(fe,{pathD:Q}),Number.isFinite(f)&&e.jsx(me,{x:n,y:f,toX:x,toY:u}),L&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{points:v,toX:x,toY:u,color:"#f97316",side:"left"}),e.jsx(Y,{points:C,toX:x,toY:u,color:"#8b5cf6",side:"right"})]}),p!==null&&j!==null&&Number.isFinite(j)&&e.jsx(he,{x:p,y:j,toX:x,toY:u})]}),o.note&&e.jsx(pe,{note:o.note}),M&&e.jsxs("div",{style:{marginTop:12,padding:12,background:"#f0f9ff",borderRadius:8},children:[e.jsxs("label",{style:{fontSize:13},children:["x = ",(g==null?void 0:g.toFixed(3))??n.toFixed(3),e.jsx("input",{type:"range",min:r,max:d,step:.01,value:g??n,onChange:i=>A(parseFloat(i.target.value)),style:{width:"100%",marginTop:4}})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:h?"repeat(3, 1fr)":"repeat(6, 1fr)",gap:6,marginTop:8},children:[-.5,-.1,-.01,.01,.1,.5].map(i=>e.jsxs("button",{onClick:()=>A(n+i),style:{padding:6,borderRadius:6,border:"1px solid #3b82f6",background:"#fff",fontSize:11,cursor:"pointer"},children:[i>0?"+":"",i]},i))})]})]}),e.jsxs("div",{style:ie,children:[e.jsxs("div",{style:{...k,...ne},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Funzione"}),e.jsx(ge,{functions:V,selected:o.id,onSelect:Z}),e.jsx("div",{style:{marginTop:12},children:e.jsxs("label",{style:{fontSize:13},children:["x₀ = ",n.toFixed(2),e.jsx("input",{type:"range",min:r+.5,max:d-.5,step:.1,value:W,onChange:i=>P(parseFloat(i.target.value)),style:{width:"100%",marginTop:4}})]})})]}),e.jsxs(je,{title:"Risultato del limite",children:[e.jsxs("div",{style:{marginBottom:6},children:["lim",e.jsxs("sub",{style:{fontSize:11},children:["x → ",n.toFixed(2)]})," ",o.expr," ="," ",e.jsx("strong",{style:{color:"#059669",fontSize:16},children:Number.isFinite(f)?f.toFixed(4):"non definito"})]}),L&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:12,color:"#f97316"},children:["• Da sinistra (x → x₀⁻): ",v.length>0?v[v.length-1].fx.toFixed(4):"—"]}),e.jsxs("div",{style:{fontSize:12,color:"#8b5cf6"},children:["• Da destra (x → x₀⁺): ",C.length>0?C[0].fx.toFixed(4):"—"]})]}),p!==null&&j!==null&&e.jsxs("div",{style:{marginTop:12,padding:8,background:"#fef3c7",borderRadius:8,fontSize:12},children:[e.jsxs("div",{children:["x = ",p.toFixed(4)]}),e.jsxs("div",{children:["f(x) = ",Number.isFinite(j)?j.toFixed(4):"non definito"]}),e.jsxs("div",{children:["|x - x₀| = ",Math.abs(p-n).toFixed(4)]})]})]}),J?e.jsx(ye,{leftPoints:v,rightPoints:C,x0:n,limitValue:f,onClose:()=>B(!1)}):e.jsx("div",{style:k,children:e.jsx("button",{onClick:()=>B(!0),style:{width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid #cbd5e1",background:"#fff",cursor:"pointer",fontWeight:600},children:"Mostra tabella"})})]}),e.jsxs(ve,{children:["Il limite finito per x → x₀ finito esiste quando, avvicinandosi a x₀ da sinistra e da destra, i valori di f(x) si avvicinano allo stesso numero L. Formalmente: ∀ε ",">"," 0, ∃δ ",">"," 0 tale che se |x - x₀| ","<"," δ allora |f(x) - L| ","<"," ε."]})]})}export{Me as default};
